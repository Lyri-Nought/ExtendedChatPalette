# 拡張チャットパレット
## 説明
「拡張チャットパレット」をココフォリアのページ上に追加する拡張機能です。  
### 拡張チャットパレットでできること
- 拡張チャットパレット  
1つのチャットパレット画面で複数キャラのメッセージテンプレートを管理できます。  
- 複数のメッセージ  
    同一キャラで一度に複数のメッセージテンプレートを送信できます。  
- 複数行に渡るメッセージ  
    一行だけでなく、複数行に渡るようなメッセージテンプレートでも登録できます。  
- 現在のキャラによるメッセージ送信  
    発言キャラを指定せず、現在のキャラの発言としてメッセージを送信することもできます。
- チャットパレットのボーダー作成  
    チャットパレットを一定範囲で区切るためのボーダーを作成することができます。
- タブ管理機能  
    拡張チャットパレットを複数タブに分割して管理することができます。
- 拡張回避機能  
    ハウスルールでよくあるような、「回避技能の値は、【回避技能】÷【回避回数】となる。(2回目は1/2、3回目は1/3、4回目は1/4といった具合)」といった回避判定を管理しやすくなります。  
    キャラコマに {回避回数} パラメータを設定するだけで、「回避技能を振る」「 {回避回数} パラメータを増加させる」という2つ分のメッセージを一括で送信できます。  
    (ただし、ラウンド終了時に回避回数リセットのためのメッセージを送信する必要があります。)  
## 導入方法
### リポジトリのクローン(ダウンロード)
1. [こちらのリンク](https://github.com/Lyri-Nought/ExtendedChatPalette)から、このリポジトリを開きます。
1. 開いたら、画面の右側の緑色の「Code」を選択します。
1. 「Code」を選択したら、一番下にある「Download ZIP」を選択します。
1. 「Download ZIP」を選択したら、リポジトリのzipファイルがダウンロードされます。
1. PC側でzipファイルを解凍しておきます。
1. お好みで、解凍した拡張機能のファイルを保存したい場所に移動しておきます。
    1. 解凍したzipファイルを開き、その中のdistフォルダを切り取ります。
    1. 切り取ったdistフォルダを良い感じの場所に貼り付けます。
        "C:\Users\\{UserName}\AppData\Local\Google\Chrome\User Data\Default\Extensions/" とかおすすめです。  
        (拡張機能のデフォルトの配置場所)
### 拡張機能の登録
1. [こちらのリンク](chrome://extensions/)からChromeの拡張機能を管理する画面を開きます。
1. 「パッケージ化されていない拡張機能を読み込む」から、先ほどダウンロードした本拡張機能フォルダのdistフォルダを選択します。
1. これで設定は完了です。拡張チャットパレットが使用可能になります。
## 注意事項
- 本拡張機能を導入すると、ココフォリアのページが若干重くなる可能性があります。
    - 本拡張機能は「ココフォリアのページが読み込まれるのを1分間待機し、読み込まれ次第『拡張チャットパレット』ボタンを追加する」という動作を行うためです。
    - また、ページ内で要素が変更される度に「レスポンシブデザイン用のハンバーガーリストをクリックしたときのリストが表示されたかどうか」を監視するため、その点でも重くなる可能性があります。
    - (詳しい動作の発火タイミングは開発者ツールよりコンソールをご覧ください。app.jsより出力されているものが本拡張機能の出力内容となります。)
- また、部屋ごとに拡張チャットパレットのデータを作成するため、使用していない部屋のデータは削除することをおすすめします。  
    - Chromeの画面右上に表示されている拡張機能ボタンより「拡張チャットパレット」をクリックすることで、削除メニューのポップアップを表示できます。
## 拡張チャットパレットの記法
拡張チャットパレットはプレーンテキストで作成を行います。  
そのために、いくつかの記法を覚えておく必要があります。
- \# 名前
    - 「\#」の後ろに半角スペース1つ、その後ろに名前、と指定することで、
    発言キャラの指定を行います。
    - この行の次以降の行に、発言キャラに紐づけられるメッセージを登録します。
    - 次以降の行にメッセージの登録がない場合、動作時は発言キャラの変更のみ行い、メッセージの送信はしません。
- \`\`\`メッセージ\`\`\`
    - 「\# 名前」の次の行に「\`\`\`」で括ったテキストを配置すると、
    前の行で指定した発言キャラクターの名前に紐づけて、テキストが登録されます。
    - 途中で改行された場合、複数行に渡るメッセージとして登録されます。
    - さらに次の行で名前を指定することなく、メッセージが連続して登録された場合、複数のメッセージとして一括で登録されます。
    複数のメッセージとして登録されたメッセージを送信すると、一括で複数のメッセージを送信できます。
- \#\#
    - 「\#\#」と指定し、この行の次の行以降にメッセージを登録すると、
    現在入力フォームで指定されている発言キャラとしてメッセージを送信する動作を登録できます。
- \-\-\-
    - 「\-\-\-」と指定することで、拡張チャットパレット表示時にその行にボーダーを作成する。
### 例
```
# ねくろ のみこ
```CCB<=30 【こぶし】```
# ねくろ のみこ
```:MP-5```
```CCB<={POW}*5```
# ねくろ のみこ
```ネクロノミコン (Necronomicon、邦訳題：死霊秘法) は、
アラビア人「アブドル・アルハズラット」が著わしたとされる魔道書。```
---
# ねくろ のみこ
# オーガスト・ダーレス
# ハワード・フィリップス・ラヴクラフト
##
```CCB<={SAN} 【SAN値チェック】```
```